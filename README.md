# Plugin Features

The APPROVE Devtools plugin provides the building blocks for integrating KWIPPED APPROVE into any worpress website. Rather than addressing a specific template or e-commerce platform, it is generic and can be used with any template and any e-commerce platform. . 

This progin provides functionality in two different web stack layers. Javascipt (page logic) and PHP code (server side programming). 


# TL;DR
For experienced developers.
1. Retrieve your APPROVE id from KWIPPED
2. Download the WordPress Devtools plugin from the dist folder in GitHub
3. Install the plugin into WordPress
4. Create a file containing the APPROVE connection information.
5. Utilize avascript and php library functions provided by the plugin in your website.

# APPROVE Connection Information
The approve developer tools stands alone, and requires connection information contained in a file names __client\_settings.php__. This file must be located in the folder where the plugin is installed. Its contents should look like this. __PLEASE FILL IN YOUR APPROVE ID__

```php
<?php
	$client_settings = [
		"approve_id"=>"YOUR APPROVE ID",
		"approve_url"=>"https://www.kwipped.com",
		"test"=>false
	];
?>
```

# Integration Levels

## Javascript Integration

Once the devtools plugin is enabled, a kwipped_approve object is avaialble on every page in your site. The following functions are avaialble

### kwipped_approve.get_teaser(value)

Returns a promise, which will provide the teaser rate for the value provided. The following example will print the teaser rate for the value of $35,000 to the console.

```javascript
kwipped_approve.get_teaser(35000)
  .then(function(data){
  	console.log(data)
	})
  .catch(function(error){
  	console.log("An error has occurred."+error)
	});
```

### kwipped_approve.get_approve_information()

Returns an object contaning the URL for the KWIPPED hosted application page, a teaser sentence, and the raw teaser rate.

Return object example:

```javascript
{
    url: "https://example.kwipped.com&items=[{"model":"m3","quantity":"1","type":"new_product","price":"23434"},{"model":"m2","quantity":"1","type":"new_product","price":"2343"},{"model":"m3","quantity":"1","type":"new_product","price":"23434"}]",
   teaser: "Finance for $499/mo",
   teaser_raw: "499"
}
```

In order to use this tag you will have to add items to the kwipped_approve object before calling this function. 

```javascript
kwipped_approve.add_item(model,price,qty,item_type);
```

Example:

```javascript
kwipped_approve.add_item("Model-3",10000,1,"new_product");
```

After adding at least one item, the kwipped_approve.get_approve_information() function will return the correct information for the value provided. The following utilitarian functions are also available:

```javascript
kwipped_approve.get_current_items()
//Returns the list of current items.
kwipped_approve.remove_item(index) 
//Removes item at the provided index
kwipped_approve.clear_items()
//Removes all items currently in the list
```

## PHP code

The same constructs avaialble in javascript are avaialble as PHP functions for sever side processing needs. 

### Approve library instantiation

```php 
use \com\kwipped\approve\wordpress\devtools\Approve;
$app = new Approve();
```

### Adding items and retrieving approve information

After instantiating the Approve class, add items to it in the following fashion.

```php
$app->add($model,$price,$qty,$item_type);
```

Retrieve APPROVE information using the following method:
```php
$app->get_approve_information()
```

Example:
```php
$app->add("Model-1","1000","3","new_product");
$app->add("Model-2","2000","1","new_product");
//Print the returned information to the page.
echo "<pre>";
echo print_r($app->get_approve_information());
echo "</pre>";
```

### Teaser rates
Teaser rates will be dynamically generated by using the following function:
```php
$app->get_teaser($approve_total));
```
Example:
```php
echo "<pre>";
echo print_r($app->get_teaser(25000));
echo "</pre>";
```

# Updates

APPROVE Devtools plugin updates will be released periodically. You may update it by visiting the "Plugins" page in wordpress and following the provided instructions.
